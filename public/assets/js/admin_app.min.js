"use strict";var app=angular.module("myAdminApp",["ngRoute","ngDialog","ngMaterial","ngMessages","ckeditor","ui.bootstrap","angular-toasty","ngFileUpload","ngCookies"]);app.config(["$routeProvider",function(e){e.when("/",{templateUrl:"backend/landing/views/admin_login.html",controller:"homeController",resolve:{validate:notRequired}}).when("/admin/login",{templateUrl:"backend/landing/views/admin_login.html",controller:"authController",resolve:{validate:notRequired}}).when("/admin/dashboard",{templateUrl:"backend/home/views/admin_dashboard.html",controller:"homeController",resolve:{validate:required}}).when("/admin/posts",{templateUrl:"backend/blog/views/blog.html",reloadOnSearch:!1,controller:"blogController",resolve:{validate:required}}).when("/admin/edit-post/:id",{templateUrl:"backend/blog/views/add_edit_blog.html",controller:"editBlogController",resolve:{validate:required}}).when("/admin/view-post/:id",{templateUrl:"backend/blog/views/blog_detail.html",controller:"previewBlogController",resolve:{validate:required}}).when("/admin/pages",{templateUrl:"backend/cms/views/cms.html",controller:"cmsController",resolve:{validate:required}}).when("/admin/pages/:page",{templateUrl:"backend/cms/views/add_edit_page.html",controller:"addEditCmsController",resolve:{validate:required}}).when("/admin/page/detail/:id",{templateUrl:"backend/cms/views/cms_page_detail.html",controller:"cmsController",resolve:{validate:required}}).when("/admin/profile",{templateUrl:"backend/profile/views/profile.html",controller:"profileController",resolve:{validate:required}}).when("/admin/edit-profile",{templateUrl:"backend/profile/views/edit_profile.html",controller:"profileController",resolve:{validate:required}}).when("/admin/change-password",{templateUrl:"backend/profile/views/change_password.html",controller:"profileController",resolve:{validate:required}}).when("/admin/faq",{templateUrl:"backend/faq/views/faq.html",controller:"faqController",resolve:{validate:required}}).when("/admin/faq/:u",{templateUrl:"backend/faq/views/add_edit_faq.html",controller:"addEditFaqController",resolve:{validate:required}}).when("/admin/view-faq/:u",{templateUrl:"backend/faq/views/faq_detail.html",controller:"addEditFaqController",resolve:{validate:required}}).when("/admin/Categories",{templateUrl:"backend/Categories/views/categories.html",controller:"categoryController",resolve:{validate:required}}).when("/admin/categories/new-category",{templateUrl:"backend/Categories/views/add_edit_category.html",controller:"addEditCategoryController",resolve:{validate:required}}).when("/admin/category/:id",{templateUrl:"backend/Categories/views/add_edit_category.html",controller:"addEditCategoryController",resolve:{validate:required}}).when("/admin/category/detail/:id",{templateUrl:"backend/Categories/views/preview_category.html",controller:"addEditCategoryController",resolve:{validate:required}}).when("/admin/users/service-providers",{templateUrl:"backend/users/views/users.html",controller:"userController",resolve:{validate:required}}).when("/admin/users/customers",{templateUrl:"backend/users/views/users.html",controller:"userController",resolve:{validate:required}}).when("/admin/users/new",{templateUrl:"backend/users/views/new_user.html",controller:"userController",resolve:{validate:required}}).otherwise({redirectTo:"/"})}]).config(["toastyConfigProvider",function(e){e.setConfig({sound:!0,shake:!1,position:"top-right"})}]).config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){return{request:function(t){t.headers=t.headers||{};var a=localStorage.getItem("token");return a&&(t.headers.Authorization="Bearer "+a),t||e.when(t)},response:function(t){return t||e.when(t)}}}])}]).run(["$rootScope","$location",function(e,t){e.$on("$routeChangeSuccess",function(){"/admin/login"==t.path()?e.headerAndSidebar=!0:e.headerAndSidebar=!1}),e.$on("$routeChangeError",function(e,a,i,n){n.authentication===!0?t.path("/admin/dashboard"):t.path("/admin/login")}),e.$on("$locationChangeSuccess",function(e,a,i){var n=i.substr(0,i.indexOf("?")),o=a.substr(0,a.indexOf("?"));n!==o&&n.length>0&&t.search("")}),e.$on("$routeChangeStart",function(){"/admin/login"==t.path()?e.adminLoginPage=!0:e.adminLoginPage=!1})}]);var required=["$q",function(e){var t=e.defer(),a=localStorage.getItem("token");return a?t.resolve():t.reject({authentication:!1}),t.promise}],notRequired=["$q",function(e){var t=e.defer(),a=localStorage.getItem("token");return a?t.reject({authentication:!0}):t.resolve(),t.promise}];app.factory("confirmationDialog",["$mdDialog",function(e){return{confirm:function(t,a){var i=e.confirm().title("Would you like to delete ?").textContent("Note: This is temporary delete. It can be restore.").targetEvent(t).ok("Ok").cancel("Cancel");a(e.show(i))}}}]),app.factory("htmlToText",[function(){return{convert:function(e){var t=document.createElement("div");t.innerHTML=e;var a=t.innerText;return a}}}]),app.factory("http",["$http",function(e){return{get:function(t,a){return e.get(t,a).then(function(e){return e.data})},post:function(t,a){return e.post(t,a).then(function(e){return{result:e.data}},function(e){return{error:e.data}})},put:function(){},delete:function(t){return e.delete(t).then(function(e){return{result:e.data}})}}}]),app.factory("socket",["$rootScope",function(e){var t=io.connect();return{on:function(e,a){t.on(e,a)},emit:function(e,a){t.emit(e,a)}}}]),app.factory("toastyService",["toasty",function(e){return{notification:function(t,a){t===!0?e.success({title:"",msg:a,showClose:!0,clickToClose:!0,timeout:5e3,html:!0,theme:"bootstrap"}):t===!1&&e.error({title:"",msg:a,showClose:!0,clickToClose:!0,timeout:5e3,html:!0,theme:"bootstrap"})}}}]);var obj={forceEllipses:!0,maxSize:5};app.value("paging",obj),app.controller("authController",["$scope","$location","$rootScope","$http",function(e,t,a,i){e.adminLogin=function(){i.post("/admin/login",e.loginInfo).then(function(e){e.data.success===!0&&(localStorage.setItem("token",e.data.token),t.path("/admin/dashboard"))})}}]),app.controller("homeController",["Upload","$routeParams","$scope","$rootScope","$location","$http","toasty","toastyService","ngDialog",function(e,t,a,i,n,o,r,s,c){a.userMenu=[{text:"Profile"},{text:"Change Password"},{text:"Logout"}],a.options={language:"en",allowedContent:!0,entities:!1},a.collapseAll=function(e){for(var t in a.accordianData)a.accordianData[t]!=e&&(a.accordianData[t].expanded=!1);e.expanded=!e.expanded},a.updateProfile=!0,a.posts=function(){var e=n.path().split("/").pop();"success-stories"==e?a.title="Success Stories":"blog"==e&&(a.title="Blog")},a.profileSectionMode=function(e){"t"==e?a.updateProfile=!1:a.updateProfile=!0},a.adminProfileInfo=function(){o.get("/admin/profile-info").success(function(e){a.user=e.info})},a.libraryFeaturePopUp=function(){var e=n.path().split("/").pop();if("libraries-list"==e)a.selectPopUpDiv="lib";else if("category-list"==e)a.selectPopUpDiv="lib-cat";else{if("posts"==e)return void n.path("/admin/library-features/post/add-new");"label"==e?a.selectPopUpDiv="label":"sub-category-list"==e&&(a.selectPopUpDiv="add-sub-cat")}c.open({template:"html/admin/ng_dialog/pop_up.html",scope:a})},$("#text").addClass("cursor-default"),a.libraryFeatureList=function(e){var t=n.path().split("/").pop();"posts"==t&&(a.activePageName="Posts"),"libraries-list"==t?(a.activePageName="Libraries List",o.get("/admin/getlibraryFeatureData?type=lib").success(function(e){a.libraryFeatureData=e.list[0].library})):"category-list"==t&&void 0===e?(a.activePageName="Category List",o.get("/admin/getlibraryFeatureData?type=cat").success(function(e){a.libraryFeatureData=e.list[0].category})):"posts"==t?(a.activePageName="Posts",o.get("/admin/getlibraryFeatureData?type=post").success(function(e){a.libraryFeatureData=e.list})):"label"==t?(a.activePageName="Labels",o.get("/admin/getlibraryFeatureData?type=libLabel").success(function(e){a.libraryFeatureData=e.list[0].label})):"sub-category-list"!=t&&"subCat"!=e||o.get("/admin/getlibraryFeatureData?type=subCat").success(function(t){"subCat"==e?a.subCatDropDown=t.list[0].sub_category:(a.activePageName="Sub Category List",a.libraryFeatureData=t.list[0].sub_category)})},a.selectedToppings=[],a.printSelectedSubCategory=function(){var e=this.selectedToppings.length;if(e>1){var t=e>2,a=(t?",":"")+"",i=a+this.selectedToppings[this.selectedToppings.length-1];return this.selectedToppings.slice(0,-1).join(", ")+i}return this.selectedToppings.join("")},a.addLibary=function(e){o.post("/admin/addLib",e).success(function(e){s.notification(e.success,e.msg),e.success===!0&&(a.libraryFeatureList(),c.closeAll())})},a.removeLibraryData=function(e,t){var i,r=n.path().split("/").pop();i="sub-category-list"==r?t:"o",o.get("/admin/deleteLibraryData?id="+e+"&&type="+r+"&&find="+i).success(function(t){if(s.notification(t.success,t.msg),t.success===!0)for(var i=0;i<a.libraryFeatureData.length;i++)if(a.libraryFeatureData[i]._id==e){a.libraryFeatureData.splice(i,1);break}})},a.addLibaryCategory=function(e){o.post("/admin/addLibCat",e).success(function(e){s.notification(e.success,e.msg),a.libraryFeatureList(),c.closeAll()})},a.addLibaryLabel=function(e){o.post("/admin/addLibLab",e).success(function(e){s.notification(e.success,e.msg),a.libraryFeatureList(),c.closeAll()})},a.libraryFeaturesDiv=function(e){"lib"==e?a.ActiveDiv="lib":"cat"==e?a.ActiveDiv="cat":"post"==e&&(a.ActiveDiv="post")},a.spanToInput=function(e,t){"addSub"==t?a.showAssignCatForm=e._id:"edit"==t&&(a.showForm=e._id,a.newLibfeat=e.lib||e.cat||e.lab||e.sub)},a.editAndSaveLibraryData=function(e,t){if(t){var i=n.path().split("/").pop().substring(0,2);o.get("/admin/updateLibraryData?updated="+e+"&&id="+t+"&&type="+i).success(function(e){s.notification(e.success,e.msg),e.success===!0&&(a.showForm=null,a.libraryFeatureList())})}else a.showForm=null,a.showSubCatUl=null,a.showAssignCatForm=null},a.viewSubCategory=function(e){a.showSubCatUl=e,o.get("/admin/showSubCategory?id="+e).success(function(e){a.catToSubCat=e.data})},a.closeEditForm=function(){a.editAndSaveLibraryData()},a.assignSubCategory=function(e,t){var i={subCat:e,catId:t};o.post("/admin/assignSubCat",i).success(function(e){s.notification(e.success,e.msg),e.success===!0&&(a.showAssignCatForm=null)})},a.addSubCategory=function(e){o.post("/admin/addSubCat",e).success(function(e){s.notification(e.success,e.msg),a.libraryFeatureList()})},a.getLibDropDownList=function(){o.get("/admin/libDropDownList").success(function(e){alert("data")})},a.addUpdateLibCat=function(e){var t=n.path().split("/").pop(),i=n.path().split("/").slice(-2)[0],r=angular.element(e.content).text().replace(/[\s]/g,"");return 0===r.length?void s.notification(!1,"Please fill page content"):void(a.page._id?o.post("/admin/updateLibRecord",a.page).success(function(e){s.notification(e.success,e.msg)}):"new-sub-category"==i?(e.type="subCat",e.cat_id=t,o.post("/admin/addUpdateLibCat",e).success(function(e){s.notification(e.success,e.msg),e.success===!0&&n.path("/admin/library-features/sub-category-list/"+t)})):"new-post"==i?(e.type="post",e.sub_cat_id=t,o.post("/admin/addUpdateLibCat",e).success(function(e){s.notification(e.success,e.msg),e.success===!0&&n.path("/admin/library-features/posts/"+t)})):"libraries-list"==i&&(e.type="cat",o.post("/admin/addUpdateLibCat",e).success(function(e){s.notification(e.success,e.msg),e.success===!0&&n.path("/admin/library-features/libraries-list")})))},a.libraryRecords=function(){a.pageHeading="Libraries",o.get("/admin/libRecord").success(function(e){e.success===!0?a.libData=e.data:a.libData=[]})},a.librarySubCatRecord=function(){a.pageHeading="Sub Categories";var e=n.path().split("/").pop();o.get("/admin/libSubCatRecord?id="+e).success(function(e){a.libData=e.data})},a.libraryPostsRecord=function(){a.pageHeading="Posts";var e=n.path().split("/").pop();o.get("/admin/libPostRecord?id="+e).success(function(e){a.libData=e.data})},a.managePageHeading=function(){var e=n.path().split("/").slice(-2)[0],t=n.path().split("/").pop();"new-sub-category"==e?a.pageHeading="Add New Sub Category":"new-post"==e?a.pageHeading="Add New Post":"cat"==e?a.pageHeading="Edit Category":"subCat"==e?a.pageHeading="Edit Sub Category":"post"==e?a.pageHeading="Edit Post":"libraries-list"==e?a.pageHeading="Add Category":"success-stories"==t?a.pageHeading="Success Stories":"blog"==t&&(a.pageHeading="Blog")},a.receiveLibDataToEdit=function(){var e=n.path().split("/").pop(),t=n.path().split("/").slice(-2)[0];"cat"!=t&&"subCat"!=t&&"post"!=t||o.get("/admin/getLibdataToEdit?id="+e).success(function(e){a.page=e.data[0]})},a.testimonialDataToEdit=function(){var e=n.path().split("/").pop();"add-new-testimonial"==e?a.testoPageTittle="Add New Testimonial":(a.testoPageTittle="Edit Page",o.get("/admin/getTestimonialById?id="+e).success(function(e){a.testo=e.testimonial}))},a.testimonialCategory=function(){o.get("/admin/testimonialCategory").success(function(e){a.testiCat=e.cat[0].category})},a.testimonialData=function(){o.get("/admin/get-testimonial-data").success(function(e){a.pages=e.data})},a.categoriesAndRecordDiv=function(e){"categories"==e?(a.testimonialCat=!0,a.faqData=[{question:"question1"}]):"testimonial"==e&&(a.testimonialCat=!1)},a.deleteTestimonial=function(e,t){o.get("/admin/deleteTestimonial?id="+e).success(function(e){a.testimonialData(),s.notification(e.success,e.msg)})},a.addTestimonialCategoryPopUp=function(e){a.selectPopUpDiv=e,c.open({template:"view/admin/ng_dialog/pop_up.html",scope:a})},a.insertUpdateTestimonail=function(t){a.testo.content?e.upload({url:"/admin/insert-update-testimonail",data:{file:t,detail:a.testo}}).then(function(e){s.notification(e.data.success,e.data.msg),e.data.success&&n.path("/admin/testimonial")}):s.notification(!1,"Please fill all required flield")},a.addTestimonialCategory=function(e){o.post("/admin/add-testimonial-category",e).success(function(e){s.notification(e.success,e.msg),a.testimonialCategory()})},a.viewDetailPage=function(e){n.path("/admin/testimonial/detail/"+e)},a.viewDetail=function(){o.get("/admin/getTestimonialById?id="+t.id).success(function(e){a.testo=e.testimonial})};var l={xData:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yData:[{name:"Users",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]},{name:"Properties",data:[-.2,.8,5.7,11.3,17,22,24.8,24.1,20.1,14.1,8.6,2.5]},{name:"Sold Properties",data:[-.9,.6,3.5,8.4,13.5,17,18.6,17.9,14.3,9,3.9,1]}]};a.lineChartYData=l.yData,a.lineChartXData=l.xData}]),app.controller("addEditFaqController",["htmlToText","$scope","$location","http","toastyService",function(e,t,a,i,n){function o(){var n=a.path().split("/").pop();"new"==n?t.slugInput=!1:(t.slugInput=!0,i.get("/admin/faq-detail?id="+n).then(function(a){t.answer=e.convert(a.faq.answer),a.success===!0&&(t.faq=a.faq)}))}!function(){"/admin/faq/new"===a.path()?t.pageHeader="Add New FAQ":t.pageHeader="Edit",o()}(),t.insertUpdateFaq=function(){var e=angular.element(t.faq.answer).text().replace(/[\s]/g,"");e?i.post("/admin/insert-update-faq",t.faq).then(function(e){n.notification(e.result.success,e.result.msg),e.result.success&&a.path("/admin/faq")}):n.notification(!1,"Please fill all required flield")}}]),app.controller("faqController",["http","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o){function r(){o.get("/admin/faq-list").then(function(e){a.faqList=e.data})}!function(){r()}(),a.addNewFaq=function(e){i.path(e)},a.moveToTrash=function(i,n){e.get("/admin/move-to-trash-faq?id="+i).then(function(e){if(t.notification(e.success,e.msg),e.success===!0)for(var n=0;n<a.faqData.length;n++)if(a.faqData[n]._id==i){a.faqData.splice(n,1);break}})},a.to=function(e,t){i.path(e+t)}}]),app.controller("profileController",["socket","Upload","$routeParams","$scope","$rootScope","$location","$http","toasty","toastyService",function(e,t,a,i,n,o,r,s,c){i.editProfilePage=function(e){o.path("/admin/edit-profile")},i.adminProfileInfo=function(){r.get("/admin/profile-info").then(function(e){i.user=e.data.info})},i.updateAdminProfile=function(e){r.post("/admin//update-profile",e).then(function(e){c.notification(e.data.success,e.data.msg),e.data.success&&o.path("/admin/profile")})},i.changePassword=function(e){var t={password:e.cpassword};e.cpassword==e.password?r.post("/admin/changePassword",t).success(function(e){c.notification(e.success,e.msg)}):c.notification(!1,"New password and confirm password is not equal.")}}]),app.controller("addEditCmsController",["Upload","$routeParams","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o,r){function s(){var e=t.page;"add-new-page"==e?i.csmPageTittle="Add New Page":(i.csmPageTittle="Edit Page",r.get("/admin/cms-page-by-id?id="+e).then(function(e){i.page=e.data.page}))}!function(){s()}(),i.updatePage=function(t){i.page.content?e.upload({url:"/admin/insert-update-page",data:{file:t,pageInfo:i.page}}).then(function(e){a.notification(e.data.success,e.data.msg),e.data.success&&n.path("/admin/pages")}):a.notification(!1,"Please fill all required flield")}}]),app.controller("cmsController",["http","Upload","$routeParams","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o,r,s){function c(){e.get("/admin/get-cms-page").then(function(e){n.pageResult=e})}!function(){n.alphaAsc="fa fa-sort-alpha-asc",n.numericAsc="fa fa-sort-numeric-asc",c()}(),n.addNew=function(e){o.path(e)},n.redirectTo=function(e,t){o.path(e+t)},n.delete=function(t,a){e.get("/admin/delete-cms-page?id="+t).then(function(e){if(i.notification(e.success,e.msg),e.success===!0)for(var a=0;a<n.pageResult.page.length;a++)if(n.pageResult.page[a]._id==t){n.pageResult.page.splice(a,1);break}})}}]),app.controller("editBlogController",["$timeout","paging","confirmationDialog","http","Upload","$routeParams","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o,r,s,c,l,d){function u(e){i.get("/admin/post-info?id="+o.id).then(function(t){e(t.data)})}s.postInfo=function(){"add-new"!==o.key?(s.pageHeader="Edit Blog",u(function(e){s.page=e})):s.pageHeader="New Blog"},s.addUpdatePost=function(e){var t=angular.element(s.page.body).text().replace(/[\s]/g,"");t?n.upload({url:"/admin/add-update-post",data:{file:e,userData:s.page}}).then(function(e){var t=e.data;r.notification(t.success,t.msg),t.success&&c.path("/admin/posts")}):r.notification(!1,"Please fill all required fields")},s.viewDetail=function(){u(function(e){s.page=e;var t=document.createElement("div");t.innerHTML=e.body,s.content=t.innerText})}}]),app.controller("blogController",["$timeout","paging","confirmationDialog","http","Upload","$routeParams","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o,r,s,c,l,d){function u(){s.sortOn="created_at",s.sortType=-1;var e=angular.isDefined(o.page)?o.page:1;s.paging={page:e},s.forceEllipses=t.forceEllipses,s.maxSize=t.maxSize,s.titleIcon="fa fa-sort-alpha-asc",s.authorIcon="fa fa-sort-alpha-asc",s.orderIcon="fa fa-sort-numeric-asc",s.typeIcon="fa fa-sort-alpha-asc",s.statusIcon="fa fa-sort-alpha-asc"}function p(e){var t=angular.isDefined(s.paging)?s.paging.page:1;console.log(t),i.get("/admin/posts-list?page="+t+"&sortOn="+s.sortOn+"&sortType="+s.sortType).then(function(e){s.postResponse=e,s.paging=e.paging}),s.more="getPostsList"}function f(e){c.search("page",e)}!function(){u(),p()}(),s.search=function(e,t){s.more="search",s.searchFor=e,i.get("/admin/search-post?searchFor="+e).then(function(e){s.postResponse=e,s.paging.count=null})},s.changeSearch=function(e){angular.isUndefined(e)?p():s.search(e)},s.sort=function(e,t,a){f(1),s.paging.page=1,s.alpha=["fa fa-sort-alpha-asc","fa fa-sort-alpha-desc"],s.numeric=["fa fa-sort-numeric-asc","fa fa-sort-numeric-desc"];var i=a.currentTarget.className;$(a.target).removeClass(i);var n,o;s.alpha.indexOf(i)!==-1?(n=1==s.alpha.indexOf(i)?0:1,$(a.target).addClass(s.alpha[n]),o=0===n?-1:1):s.numeric.indexOf(i)!==-1&&(n=1==s.numeric.indexOf(i)?0:1,$(a.target).addClass(s.numeric[n]),o=0===n?-1:1),angular.isUndefined(e)&&(s.sortOn=t,s.sortType=o,p())},s.getMorePosts=function(){if("getPostsList"==s.more)f(s.paging.page),p();else if("search"==s.more){var e=s.searchFor;s.search(e,"more")}},s.editBlogPage=function(e,t){c.path(e+t)},s.addPost=function(e){c.path(e)},s.deletePost=function(e,t,n){a.confirm(n,function(a){a.then(function(){i.delete("/admin/delete-post/"+e).then(function(e){r.notification(e.result.success,e.result.msg),e.result.success&&s.postResponse.data.splice(t,1)})},function(){})})},s.postPreviewPage=function(e,t){c.path(e+t)}}]),app.controller("previewBlogController",["$timeout","paging","confirmationDialog","http","Upload","$routeParams","toastyService","$scope","$location","$rootScope","$http",function(e,t,a,i,n,o,r,s,c,l,d){!function(){i.get("/admin/post-info?id="+o.id).then(function(e){s.page=e.data;var t=document.createElement("div");t.innerHTML=e.data.body,s.content=t.innerText})}()}]),app.controller("userController",["$scope","$location","socket",function(e,t,a){!function(){var a=t.path().split("/"),i=a[a.length-1];"service-providers"==i?e.userType="Service Provider":"customers"==i&&(e.userType="Customer"),e.data=[{firstname:"Jhon",email:"jhon@gmail.com",status:!0},{firstname:"Rohan",email:"Rohan@gmail.com",status:!1},{firstname:"Bill",email:"Bill@gmail.com",status:!1},{firstname:"Milton",email:"Milton@gmail.com",status:!0},{firstname:"Juri",email:"Juri@gmail.com",status:!0},{firstname:"Jack",email:"Jack@gmail.com",status:!0},{firstname:"Jitendra",email:"Jitendra@gmail.com",status:!0},{firstname:"Node",email:"Node@gmail.com",status:!0},{firstname:"Amit",email:"Amit@gmail.com",status:!1},{firstname:"Sumit",email:"Sumit@gmail.com",status:!1}]}(),e.addNew=function(e){t.path(e)},e.signUp=function(){console.log(e.user)},e.back=function(){window.history.back()}}]),app.controller("includeController",["socket","$cookies","$timeout","Upload","$routeParams","$scope","$rootScope","$location","http","toasty","toastyService","ngDialog",function(e,t,a,i,n,o,r,s,c,l,d,u){function p(e){$(".parent7").addClass("active")}function f(){c.get("/admin/get-all-count").then(function(e){var t=e.result;for(var a in t)o[a]=t[a]})}e.on("notification",function(e){console.log("This is socket response")}),function(){angular.isUndefined(t.get("clickedOn"))&&t.put("clickedOn",".parent1"),a(function(){angular.element(document.querySelector(t.get("clickedOn"))).addClass("active"),angular.element(document.querySelector(t.get("subMenu"))).addClass("active")},500),f()}(),o.selectMainMenu=function(e){var i=e.currentTarget.className.split(" "),n="."+i[1];i.indexOf("active")==-1&&(t.put("clickedOn",n),$(".treeview").removeClass("active"),a(function(){$(n).addClass("active")},500))},o.selectSubmenu=function(e){var a=e.currentTarget.className.split(" "),i="."+a[0];$(".treeview-menu li").removeClass("active"),t.put("subMenu",i),$(i).addClass("active")},o.hideSubmenu=function(){$(".treeview-menu").slideUp("slow")},o.profilePage=function(){s.path("/admin/profile")},o.changePasswordPage=function(){s.path("/admin/change-password")},o.logout=function(){localStorage.clear(),s.path("/admin/login")},o.selectLeftPanel=function(){p()},o.toPage=function(e,t){p(t),s.path(e)}}]),app.controller("addEditCategoryController",["$routeParams","$scope","$location","http","toastyService",function(e,t,a,i,n){function o(){i.get("/admin/category-info/"+e.id).then(function(e){e.success?t.category=e.result:n.notification(e.success,e.msg)})}function r(){i.get("/admin/category-drop-down-list").then(function(e){t.dropDownList=e.result})}!function(){r(),"/admin/categories/new-category"==a.path()?t.categoryHeader="New Category":(t.categoryHeader="Edit",o())}(),t.insertUpdateCategory=function(){i.post("/admin/add-update-category",t.category).then(function(e){n.notification(e.result.success,e.result.msg),e.result.success&&a.path("/admin/Categories")})}}]),app.controller("categoryController",["toastyService","confirmationDialog","$scope","$location","http",function(e,t,a,i,n){function o(){n.get("/admin/category-list").then(function(e){a.data=e})}!function(){o()}(),a.addNew=function(e){i.path(e)},a.redirectTo=function(e,t){i.path(e+t)},a.delete=function(i,o,r){console.log(o),t.confirm(r,function(t){t.then(function(){n.delete("/admin/delete-category/"+i).then(function(t){e.notification(t.result.success,t.result.msg),t.result.success&&a.data.result.splice(o,1)})},function(){})})}}]),app.directive("numbersOnly",function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.push(function(e){if(void 0===e)return"";var t=e.replace(/[^0-9]/g,"");return t!=e&&(i.$setViewValue(t),i.$render()),t})}}}).directive("setHeight",["$window",function(e){return{restrict:"A",link:function(t,a,i){a.css("min-height",e.innerHeight-50+"px")}}}]).directive("backButton",function(){return{restrict:"A",link:function(e,t,a){t.on("click",function(){history.back(),e.$apply()})}}}),app.directive("chart",function(){return{restrict:"E",template:"<div></div>",transclude:!0,replace:!0,scope:"=",link:function(e,t,a){var i={chart:{renderTo:t[0],type:"line",marginRight:130,marginBottom:40},title:{text:a.title,x:-20},subtitle:{text:a.subtitle,x:-20},xAxis:{tickInterval:1,title:{text:a.xname}},plotOptions:{lineWidth:.5},yAxis:{title:{text:a.yname},tickInterval:a.yinterval?a.yinterval:null,max:a.ymax,min:a.ymin},tooltip:{formatter:e[a.formatter]||function(){return"<b>"+this.y+"</b>"}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-10,y:100,borderWidth:0},series:[{name:"Tokyo",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]}]};e.$watch(function(e){return JSON.stringify({xAxis:{categories:e[a.xdata]},series:e[a.ydata]})},function(e){if(e=JSON.parse(e),e.series){angular.extend(i,e);new Highcharts.Chart(i)}})}}});